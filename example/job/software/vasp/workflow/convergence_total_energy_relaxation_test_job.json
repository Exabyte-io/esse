{
    "_id": "test_vasp_job",
    "title": "test_vasp_job",
    "compute": {
        "nodes": 1,
        "ppn": 1,
        "cluster": {
            "fqdn": "master-1-staging.exabyte.io",
            "jid": "1234.master-1-staging.exabyte.io"
        }
    },
    "model": {
        "method": {
            "workflow": {
                "app": "vasp",
                "name": "one",
                "units": [
                    {
                        "head": true,
                        "type": "assignment",
                        "flowchartId": "init_tolerance",
                        "next": "init_increment",
                        "assignment": {
                            "name": "TOLERANCE",
                            "value": "1e-3"
                        }
                    },
                    {
                        "type": "assignment",
                        "flowchartId": "init_increment",
                        "next": "init_scalar",
                        "assignment": {
                            "name": "INCREMENT",
                            "value": "1"
                        }
                    },
                    {
                        "type": "assignment",
                        "flowchartId": "init_scalar",
                        "next": "init_parameter",
                        "assignment": {
                            "name": "PREVIOUS_SCALAR_VALUE",
                            "value": "0"
                        }
                    },
                    {
                        "type": "assignment",
                        "flowchartId": "init_parameter",
                        "next": "extract_characteristic",
                        "assignment": {
                            "name": "PARAMETER",
                            "value": "1"
                        }
                    },
                    {
                        "status": "idle",
                        "flowchartId": "extract_characteristic",
                        "type": "compute",
                        "next": "assign_scalar_globally",
                        "app": {
                            "name": "vasp",
                            "exec": "vasp"
                        },
                        "monitors": [
                            {
                                "name": "standard_output"
                            },
                            {
                                "name": "delta_energy"
                            },
                            {
                                "name": "total_energy"
                            }
                        ],
                        "postProcessors": [],
                        "input": [
                            {
                                "content": "SYSTEM =  Si-FCC\nLWAVE  = .FALSE.\nLCHARG = .FALSE.\nISMEAR =    1\nSIGMA  = 0.1\n",
                                "name": "INCAR"
                            },
                            {
                                "content": "Automatic mesh\n0\nGamma\n  {{PARAMETER | default('1')}} {{PARAMETER | default('1')}} {{PARAMETER | default('1')}}\n    0.  0.  0.\n",
                                "name": "KPOINTS"
                            },
                            {
                                "content": "Si\n5.0\n0.500000000 0.500000000 0.000000000\n0.000000000 0.500000000 0.500000000\n0.500000000 0.000000000 0.500000000\nSi\n2\ndirect\n0.000000000 0.000000000 0.000000000 Si\n0.250000000 0.250000000 0.250000000 Si\n",
                                "name": "POSCAR"
                            }
                        ],
                        "results": [
                            {
                                "name": "total_energy"
                            }
                        ]
                    },
                    {
                        "type": "assignment",
                        "flowchartId": "assign_scalar_globally",
                        "next": "check_convergence",
                        "assignment": {
                            "input": [
                                {
                                    "scope": "extract_characteristic",
                                    "name": "total_energy"
                                }
                            ],
                            "name": "SCALAR_RESULT",
                            "value": "total_energy"
                        }
                    },
                    {
                        "flowchartId": "check_convergence",
                        "type": "condition",
                        "condition": {
                            "input": [
                                {
                                    "scope": "global",
                                    "name": "PREVIOUS_SCALAR_VALUE"
                                },
                                {
                                    "scope": "global",
                                    "name": "SCALAR_RESULT"
                                },
                                {
                                    "scope": "global",
                                    "name": "TOLERANCE"
                                }
                            ],
                            "statement": "abs(PREVIOUS_SCALAR_VALUE - SCALAR_RESULT) < TOLERANCE",
                            "then": "convergence_is_reached",
                            "else": "save_previous_value",
                            "maxOccurences": 100
                        }
                    },
                    {
                        "flowchartId": "save_previous_value",
                        "type": "assignment",
                        "next": "increment_parameter",
                        "assignment": {
                            "input": [
                                {
                                    "scope": "global",
                                    "name": "SCALAR_RESULT"
                                }
                            ],
                            "name": "PREVIOUS_SCALAR_VALUE",
                            "value": "SCALAR_RESULT"
                        }
                    },
                    {
                        "flowchartId": "increment_parameter",
                        "type": "assignment",
                        "next": "extract_characteristic",
                        "assignment": {
                            "input": [
                                {
                                    "scope": "global",
                                    "name": "PARAMETER"
                                },
                                {
                                    "scope": "global",
                                    "name": "INCREMENT"
                                }
                            ],
                            "name": "PARAMETER",
                            "value": "PARAMETER + INCREMENT"
                        }
                    },
                    {
                        "flowchartId": "convergence_is_reached",
                        "type": "assignment",
                        "next": "run_relaxation",
                        "assignment": {
                            "input": [
                                {
                                    "scope": "global",
                                    "name": "PARAMETER"
                                },
                                {
                                    "scope": "global",
                                    "name": "INCREMENT"
                                }
                            ],
                            "name": "PARAMETER",
                            "value": "PARAMETER - INCREMENT"
                        }
                    },
                    {
                        "flowchartId": "run_relaxation",
                        "status": "idle",
                        "type": "compute",
                        "next": "exit",
                        "app": {
                            "name": "vasp",
                            "exec": "vasp"
                        },
                        "monitors": [
                            {
                                "name": "standard_output"
                            },
                            {
                                "name": "delta_energy"
                            },
                            {
                                "name": "total_energy"
                            }
                        ],
                        "postProcessors": [
                            {
                                "type": "command",
                                "name": "copy_file",
                                "kwargs": {
                                    "source": "CONTCAR",
                                    "destination": "POSCAR"
                                }
                            }
                        ],
                        "input": [
                            {
                                "content": "SYSTEM =  Si-FCC\nLWAVE  = .FALSE.\nLCHARG = .FALSE.\nISMEAR =    1\nSIGMA  = 0.1\nISIF = 3\nIBRION = 2\nNSW = 300\n",
                                "name": "INCAR"
                            }
                        ],
                        "results": [
                            {
                                "name": "total_energy"
                            }
                        ]
                    },
                    {
                        "flowchartId": "exit",
                        "type": "exit",
                        "exit": {
                            "throwException": false
                        }
                    }
                ]
            },
            "data": {
                "pseudo": [
                    {
                        "_id": "56b13cbbfe45004cfb2869ee",
                        "path": "/export/share/pseudo/si/gga/pbe/vasp/5.2/paw/default/POTCAR",
                        "filename": "POTCAR",
                        "element": "Si",
                        "functional": "PBE",
                        "type": "us"
                    }
                ]
            }
        }
    },
    "_project": {
        "_id": "56c569d7fe45004bec30b5e7",
        "name": "Project 1",
        "owner": {
            "_id": "sdkucJLKbsaa2ajksh",
            "name": "demo",
            "type": 10
        },
        "slug": "project-1",
        "goldName": "exabyte-project-1"
    },
    "version": "0.1.0",
    "owner": {
        "_id": "sdkucJLKbsaa2ajksh",
        "name": "demo",
        "type": 10
    },
    "creator": {
        "username": "demo",
        "_id": "aljflasj01hhsdf"
    }
}
